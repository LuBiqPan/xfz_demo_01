function Banner(){this.index=1,this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$(".banner-ul"),this.pageControl=$(".page-control"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length}function Index(){var n=this;n.page=2,n.category_id=0,n.loadMoreBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active"),n.pageControl.css({width:28*n.bannerCount})}},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.animate({left:-798*n.index},1e3);var t=n.index;0===t?t=n.bannerCount-1:t===n.bannerCount+1?t=0:t-=1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},5e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this;i.loadMoreBtn.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else i.loadMoreBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadMoreBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){var n=new Banner,t=new Index;n.run(),t.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJpbmRleCIsImJhbm5lcldpZHRoIiwiYmFubmVyR3JvdXAiLCIkIiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwicGFnZUNvbnRyb2wiLCJsaUxpc3QiLCJjaGlsZHJlbiIsImJhbm5lckNvdW50IiwibGVuZ3RoIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZE1vcmVCdG4iLCJwcm90b3R5cGUiLCJpbml0QmFubmVyIiwiZmlyc3RCYW5uZXIiLCJlcSIsImNsb25lIiwibGFzdEJhbm5lciIsImFwcGVuZCIsInByZXBlbmQiLCJjc3MiLCJ3aWR0aCIsImxlZnQiLCJpbml0UGFnZUNvbnRyb2wiLCJpIiwiY2lyY2xlIiwiYWRkQ2xhc3MiLCJ0b2dnbGVBcnJvdyIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwiYW5pbWF0ZSIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwibGlzdGVuTG9hZE1vcmVFdmVudCIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJuZXdzTGlzdEdyb3VwIiwiZW1wdHkiLCJiYW5uZXIiXSwibWFwcGluZ3MiOiJBQUdBLFNBQVNBLFNBQ0xDLEtBQUtDLE1BQVEsRUFDYkQsS0FBS0UsWUFBYyxJQUVuQkYsS0FBS0csWUFBY0MsRUFBRSxpQkFDckJKLEtBQUtLLFVBQVlELEVBQUUsZUFDbkJKLEtBQUtNLFdBQWFG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LENBQUNGLE9BQVVBLElBQ3ZDTSxFQUFnQjlELEVBQUUscUJBRXRCOEQsRUFBY0MsUUFFZEQsRUFBYzFDLE9BQU9xQyxHQUNyQi9DLEVBQUtDLEtBQU8sRUFDWkQsRUFBS0UsWUFBY0EsRUFFbkJnRCxFQUFHaEMsU0FBUyxVQUFVTSxXQUFXQyxZQUFZLFVBQzdDekIsRUFBS0csWUFBWWtCLGNBT3JDdEIsTUFBTUssVUFBVWlDLElBQU0sV0FDUG5ELEtBQ05vRCxzQkFETXBELEtBRU4rRCw2QkFJVDNELEVBQUUsV0FDRSxJQUFJZ0UsRUFBUyxJQUFJckUsT0FDYkUsRUFBUSxJQUFJWSxNQUNoQnVELEVBQU9qQixNQUNQbEQsRUFBTWtEIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vKiBXaGVuIEkgd3JvdGUgdGhpcyBCYW5uZXIoKSBhbGdvcml0aG0sIG9ubHkgR29kIGtuZXcgd2hhdCBpdCBtZWFuLlxyXG4gKiBOb3csIEdvZCBkb2Vzbid0IGtub3cgZWl0aGVyLiAqL1xyXG5mdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmluZGV4ID0gMTtcclxuICAgIHRoaXMuYmFubmVyV2lkdGggPSA3OTg7XHJcblxyXG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIuYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xyXG5cclxufVxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy8gU2VsZWN0IGZpcnN0IGxpIGVsZW1lbnQgYW5kIGNsb25lIG9uZS5cclxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XHJcbiAgICAvLyBTZWxlY3QgbGFzdCBsaSBlbGVtZW50IGFuZCBjbG9uZSBvbmUuXHJcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQtMSkuY2xvbmUoKTtcclxuICAgIC8vIEFkZCBmaXJzdCBiYW5uZXIgdG8gdGhlIGVuZC5cclxuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcclxuICAgIC8vIEFkZCBsYXN0IGJhbm5lciB0byB0aGUgYmVnaW5uaW5nLlxyXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgLy8gRXh0ZW5kIGJhbm5lciB3aWR0aC5cclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6IHNlbGYuYmFubmVyV2lkdGgqKHNlbGYuYmFubmVyQ291bnQrMiksIFwibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5iYW5uZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgLy8gQWRkIGxpIGVsZW1lbnQuXHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJDb3VudCooMTIrMTYpfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKGlzU2hvdykge1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LnNob3coKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuc2hvdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcclxuICAgIH1cclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7XCJsZWZ0XCI6IC03OTgqc2VsZi5pbmRleH0sIDEwMDApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50KzEpIHtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGluZGV4ID0gaW5kZXggLSAxO1xyXG4gICAgfVxyXG4gICAgLyogQWRkIGNsYXNzIFwiYWN0aXZlXCIgdG8gY2xpY2tlZCBjaXJjbGVcclxuICAgICogIGFuZCByZW1vdmUgXCJhY3RpdmVcIiBmcm9tIGFsbCBicm90aGVyIGNpcmNsZXMuICovXHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0sIDUwMDApO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5BcnJvd0NsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7J2xlZnQnOiAtc2VsZi5iYW5uZXJDb3VudCpzZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCsxKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qIEZ1bmN0aW9ucyB0aGF0IHdvdWxkIGJlIGV4ZWN1dGVkXHJcbiAgICAgICAgKiAgd2hlbiBtb3VzZSBpcyBob3ZlcmVkLiAqL1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvKiBGdW5jdGlvbnMgdGhhdCB3b3VsZCBiZSBleGVjdXRlZFxyXG4gICAgICAgICAqIHdoZW4gbW91c2UgaXMgZHJhZ2dlZCBhd2F5LiAqL1xyXG4gICAgICAgIHNlbGYubG9vcCgpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3coZmFsc2UpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIG9iaikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmopO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiPT09PT09PT09PT09XCIpO1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleCsxO1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIEluZGV4ICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICBzZWxmLmNhdGVnb3J5X2lkID0gMDtcclxuICAgIHNlbGYubG9hZE1vcmVCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XHJcbn1cclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sb2FkTW9yZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICBcInVybFwiOiBcIi9uZXdzL2xpc3QvXCIsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInBcIjogc2VsZi5wYWdlLFxyXG4gICAgICAgICAgICAgICAgXCJjYXRlZ29yeV9pZFwiOiBzZWxmLmNhdGVnb3J5X2lkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0W1wiY29kZVwiXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0W1wiZGF0YVwiXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3c2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIsIHtcIm5ld3Nlc1wiOiBuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkTW9yZUJ0bi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRhYkdyb3VwID0gJChcIi5saXN0LXRhYlwiKTtcclxuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRoaXM6IGN1cnJlbnRseSBzZWxlY3RlZCB0YWdcclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xyXG4gICAgICAgIHZhciBwYWdlID0gMTtcclxuXHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICBcInVybFwiOiBcIi9uZXdzL2xpc3QvXCIsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImNhdGVnb3J5X2lkXCI6IGNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgXCJwXCI6IHBhZ2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0W1wiZGF0YVwiXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzTGlzdEdyb3VwID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFyIGFsbCBjb250ZW50IGZpcnN0LlxyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgbmV3cyBieSBjYXRlZ29yeS5cclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBjbGFzcyBcImFjdGl2ZVwiIHRvIGN1cnJlbnQgdGFnIGFuZCByZW1vdmUgXCJhY3RpdmVcIiBmcm9tIG90aGVycy5cclxuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZE1vcmVCdG4uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xyXG59O1xyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIHZhciBpbmRleCA9IG5ldyBJbmRleCgpO1xyXG4gICAgYmFubmVyLnJ1bigpO1xyXG4gICAgaW5kZXgucnVuKCk7XHJcbn0pOyJdfQ==
