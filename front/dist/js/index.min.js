function Banner(){this.index=1,this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$(".banner-ul"),this.pageControl=$(".page-control"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length}function Index(){this.page=2,template.defaults.imports.timeSince=function(n){var e=new Date(n),t=e.getTime(),r=((new Date).getTime()-t)/1e3;return r<60?"刚刚":60<=r&&r<3600?parseInt(r/60)+"分钟前":3600<=r&&r<86400?parseInt(r/60/60)+"小时前":86400<=r&&r<2592e3?parseInt(r/60/60/24)+"天前":e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHours()+": "+e.getMinutes()}}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active"),n.pageControl.css({width:28*n.bannerCount})}},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.animate({left:-798*n.index},1e3);var e=n.index;0===e?e=n.bannerCount-1:e===n.bannerCount+1?e=0:e-=1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},5e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n+1,t.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var r=this,i=$("#load-more-btn");i.click(function(){xfzajax.get({url:"/news/list/",data:{p:r.page},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),r.page+=1}else i.hide()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent()},$(function(){var n=new Banner,e=new Index;n.run(),e.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJpbmRleCIsImJhbm5lcldpZHRoIiwiYmFubmVyR3JvdXAiLCIkIiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwicGFnZUNvbnRyb2wiLCJsaUxpc3QiLCJjaGlsZHJlbiIsImJhbm5lckNvdW50IiwibGVuZ3RoIiwiSW5kZXgiLCJwYWdlIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lU3RhbXAiLCJwYXJzZUludCIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJwcm90b3R5cGUiLCJpbml0QmFubmVyIiwic2VsZiIsImZpcnN0QmFubmVyIiwiZXEiLCJjbG9uZSIsImxhc3RCYW5uZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY3NzIiwid2lkdGgiLCJsZWZ0IiwiaW5pdFBhZ2VDb250cm9sIiwiaSIsImNpcmNsZSIsImFkZENsYXNzIiwidG9nZ2xlQXJyb3ciLCJpc1Nob3ciLCJzaG93IiwiaGlkZSIsImFuaW1hdGUiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwibG9vcCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJsaXN0ZW5BcnJvd0NsaWNrIiwiY2xpY2siLCJsaXN0ZW5CYW5uZXJIb3ZlciIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsImxpc3RlblBhZ2VDb250cm9sIiwiZWFjaCIsIm9iaiIsInJ1biIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJsb2FkTW9yZUJ0biIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJiYW5uZXIiXSwibWFwcGluZ3MiOiJBQUdBLFNBQVNBLFNBQ0xDLEtBQUtDLE1BQVEsRUFD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U0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUV4QixJQUFJQyxFQUFTRCxFQUFhLEtBQzFCLEdBQW9CLEVBQWhCQyxFQUFPL0QsT0FBWSxDQUNuQixJQUFJZ0UsRUFBTTdELFNBQVMsWUFBYSxDQUFDNEQsT0FBVUEsSUFDbEN2RSxFQUFFLHFCQUNSa0MsT0FBT3NDLEdBQ1YzQyxFQUFLbkIsTUFBUSxPQUVicUQsRUFBWWpCLGNBUXBDckMsTUFBTWtCLFVBQVVrQyxJQUFNLFdBQ1BqRSxLQUNOa0UsdUJBSVQ5RCxFQUFFLFdBQ0UsSUFBSXlFLEVBQVMsSUFBSTlFLE9BQ2JFLEVBQVEsSUFBSVksTUFDaEJnRSxFQUFPWixNQUNQaEUsRUFBTWdFIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vKiBXaGVuIEkgd3JvdGUgdGhpcyBCYW5uZXIoKSBhbGdvcml0aG0sIG9ubHkgR29kIGtuZXcgd2hhdCBpdCBtZWFuLlxyXG4gKiBOb3csIEdvZCBkb2Vzbid0IGtub3cgZWl0aGVyLiAqL1xyXG5mdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmluZGV4ID0gMTtcclxuICAgIHRoaXMuYmFubmVyV2lkdGggPSA3OTg7XHJcblxyXG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIuYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xyXG5cclxufVxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy8gU2VsZWN0IGZpcnN0IGxpIGVsZW1lbnQgYW5kIGNsb25lIG9uZS5cclxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XHJcbiAgICAvLyBTZWxlY3QgbGFzdCBsaSBlbGVtZW50IGFuZCBjbG9uZSBvbmUuXHJcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQtMSkuY2xvbmUoKTtcclxuICAgIC8vIEFkZCBmaXJzdCBiYW5uZXIgdG8gdGhlIGVuZC5cclxuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcclxuICAgIC8vIEFkZCBsYXN0IGJhbm5lciB0byB0aGUgYmVnaW5uaW5nLlxyXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgLy8gRXh0ZW5kIGJhbm5lciB3aWR0aC5cclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6IHNlbGYuYmFubmVyV2lkdGgqKHNlbGYuYmFubmVyQ291bnQrMiksIFwibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5iYW5uZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgLy8gQWRkIGxpIGVsZW1lbnQuXHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJDb3VudCooMTIrMTYpfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKGlzU2hvdykge1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LnNob3coKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuc2hvdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcclxuICAgIH1cclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7XCJsZWZ0XCI6IC03OTgqc2VsZi5pbmRleH0sIDEwMDApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50KzEpIHtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGluZGV4ID0gaW5kZXggLSAxO1xyXG4gICAgfVxyXG4gICAgLyogQWRkIGNsYXNzIFwiYWN0aXZlXCIgdG8gY2xpY2tlZCBjaXJjbGVcclxuICAgICogIGFuZCByZW1vdmUgXCJhY3RpdmVcIiBmcm9tIGFsbCBicm90aGVyIGNpcmNsZXMuICovXHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0sIDUwMDApO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5BcnJvd0NsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7J2xlZnQnOiAtc2VsZi5iYW5uZXJDb3VudCpzZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCsxKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qIEZ1bmN0aW9ucyB0aGF0IHdvdWxkIGJlIGV4ZWN1dGVkXHJcbiAgICAgICAgKiAgd2hlbiBtb3VzZSBpcyBob3ZlcmVkLiAqL1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvKiBGdW5jdGlvbnMgdGhhdCB3b3VsZCBiZSBleGVjdXRlZFxyXG4gICAgICAgICAqIHdoZW4gbW91c2UgaXMgZHJhZ2dlZCBhd2F5LiAqL1xyXG4gICAgICAgIHNlbGYubG9vcCgpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3coZmFsc2UpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIG9iaikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmopO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiPT09PT09PT09PT09XCIpO1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleCsxO1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIEluZGV4ICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZSA9IDI7XHJcblxyXG4gICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xyXG4gICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTsgICAgLy8gVGltZSBpbiBtaWxsaXNlY29uZC5cclxuICAgICAgICB2YXIgbm93dHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG4gICAgICAgIHZhciB0aW1lU3RhbXAgPSAobm93dHMgLSBkYXRldHMpIC8gMTAwMDsgLy8gSW4gc2Vjb25kLlxyXG5cclxuICAgICAgICBpZiAodGltZVN0YW1wIDwgNjApIHtcclxuICAgICAgICAgICAgcmV0dXJuICfliJrliJonO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGltZVN0YW1wID49IDYwICYmIHRpbWVTdGFtcCA8IDYwKjYwKSB7XHJcbiAgICAgICAgICAgIHZhciBtaW51dGVzID0gcGFyc2VJbnQodGltZVN0YW1wLzYwKTtcclxuICAgICAgICAgICAgcmV0dXJuICBtaW51dGVzICsgJ+WIhumSn+WJjSc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lU3RhbXAgPj0gNjAqNjAgJiYgdGltZVN0YW1wIDwgNjAqNjAqMjQpIHtcclxuICAgICAgICAgICAgdmFyIGhvdXJzID0gcGFyc2VJbnQodGltZVN0YW1wLzYwLzYwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGhvdXJzICsgJ+Wwj+aXtuWJjSc7XHJcbiAgICAgICAgfSBlbHNlIGlmICggdGltZVN0YW1wID49IDYwKjYwKjI0ICYmIHRpbWVTdGFtcCA8IDYwKjYwKjI0KjMwKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXlzID0gcGFyc2VJbnQodGltZVN0YW1wLzYwLzYwLzI0KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRheXMgKyAn5aSp5YmNJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcclxuICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgIHZhciBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHllYXIgKyBcIi9cIiArIG1vbnRoICsgXCIvXCIgKyBkYXkgKyBcIiBcIiArIGhvdXIgKyBcIjogXCIgKyBtaW51dGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBsb2FkTW9yZUJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcclxuICAgIGxvYWRNb3JlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IFwiL25ld3MvbGlzdC9cIixcclxuICAgICAgICAgICAgXCJkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwicFwiOiBzZWxmLnBhZ2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbXCJkYXRhXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkTW9yZUJ0bi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxufTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxuICAgIGluZGV4LnJ1bigpO1xyXG59KTsiXX0=
