function News(){}News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var e=n[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){console.log(e.data);var t=e.data.url;$("#thumbnail-form").val(t)}}})})},News.prototype.listenUploadQiniuFileEvent=function(){var s=this;$("#thumbnail-btn").change(function(){var r=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var t=e.data.token,n=r.name.split(".").length,o=(new Date).getTime()+"."+r.name.split(".")[n-1],i={fname:o,params:{},mimeType:["image/png","image/jpeg","image/gif","audio/mp3"]},a={userCdnDomain:!0,retryCount:6,region:qiniu.region.z0};qiniu.upload(r,o,t,i,a).subscribe({next:s.handleFileUploadProgress,error:s.handleFileUploadError,complete:s.handleFileUploadComplete})}}})})},News.prototype.handleFileUploadProgress=function(e){var t=e.total.percent.toFixed(0)+"%";News.progressGroup.show();var n=$(".progress-bar");n.css({width:t}),n.text(t)},News.prototype.handleFileUploadError=function(e){console.log(e),News.progressGroup.hide()},News.prototype.handleFileUploadComplete=function(e){console.log(e),News.progressGroup.hide();var t="http://porbkvyou.bkt.clouddn.com/"+e.key;$("input[name='thumbnail']").val(t);var n=$(".progress-bar");n.css({width:"0"}),n.text("0%")},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(e){e.preventDefault();var t=$(this).attr("data-news-id"),n=$("input[name='title']").val(),o=$("select[name='category']").val(),i=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),r=window.ue.getContent(),s="";s=t?"/cms/edit_news/":"/cms/write_news/",xfzajax.post({url:s,data:{title:n,category:o,desc:i,thumbnail:a,content:r,pk:t},success:function(e){200===e.code&&xfzalert.alertSuccess("发布成功",function(){window.location.reload()})}})})},News.prototype.run=function(){var e=this;e.initUEditor(),e.listenUploadQiniuFileEvent(),e.listenSubmitEvent()},$(function(){(new News).run(),News.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwidmFsIiwibGlzdGVuVXBsb2FkUWluaXVGaWxlRXZlbnQiLCJzZWxmIiwidGhpcyIsImdldCIsInRva2VuIiwiZmlsZUxlbmd0aCIsIm5hbWUiLCJzcGxpdCIsImxlbmd0aCIsImtleSIsIkRhdGUiLCJnZXRUaW1lIiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtcyIsIm1pbWVUeXBlIiwiY29uZmlnIiwidXNlckNkbkRvbWFpbiIsInJldHJ5Q291bnQiLCJyZWdpb24iLCJxaW5pdSIsInowIiwidXBsb2FkIiwic3Vic2NyaWJlIiwibmV4dCIsImhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyIsImVycm9yIiwiaGFuZGxlRmlsZVVwbG9hZEVycm9yIiwiY29tcGxldGUiLCJoYW5kbGVGaWxlVXBsb2FkQ29tcGxldGUiLCJyZXNwb25zZSIsInBlcmNlbnRUZXh0IiwidG90YWwiLCJwZXJjZW50IiwidG9GaXhlZCIsInByb2dyZXNzR3JvdXAiLCJzaG93IiwicHJvZ3Jlc3NCYXIiLCJjc3MiLCJ3aWR0aCIsInRleHQiLCJoaWRlIiwibGlzdGVuU3VibWl0RXZlbnQiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJwayIsImF0dHIiLCJ0aXRsZSIsImNhdGVnb3J5IiwiZGVzYyIsInRodW1ibmFpbCIsImNvbnRlbnQiLCJnZXRDb250ZW50IiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJsb2NhdGlvbiIsInJlbG9hZCIsInJ1biJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsUUFJVEEsS0FBS0MsVUFBVUMsWUFBYyxXQUN6QkMsT0FBT0MsR0FBS0MsR0FBR0MsVUFBVSxTQUFVLENBQy9CQyxtQkFBc0IsSUFDdEJDLFVBQWEsc0JBSXJCUixLQUFLQyxVQUFVUSxzQkFBd0IsV0FDbkMsSUFDSUMsRUFBWUMsRUFBRSxrQkFDbEJELEVBQVVFLE9BQU8sV0FDYixJQUFJQyxFQUFPSCxFQUFVLEdBQUdJLE1BQU0sR0FDMUJDLEVBQVcsSUFBSUMsU0FDbkJELEVBQVNFLE9BQU8sT0FBUUosR0FDeEJLLFFBQVFDLEtBQUssQ0FDVEMsSUFBTyxvQkFDUEMsS0FBUU4sRUFDUk8sYUFBZSxFQUNmQyxhQUFlLEVBQ2ZDLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QkMsUUFBUUMsSUFBSUYsRUFBYSxNQUN6QixJQUFJTCxFQUFNSyxFQUFhLEtBQU8sSUFDVGQsRUFBRSxtQkFDUmlCLElBQUlSLFVBT3ZDcEIsS0FBS0MsVUFBVTRCLDJCQUE2QixXQUN4QyxJQUFJQyxFQUFPQyxLQUNLcEIsRUFBRSxrQkFDUkMsT0FBTyxXQUNiLElBQUlDLEVBQU9rQixLQUFLakIsTUFBTSxHQUN0QkksUUFBUWMsSUFBSSxDQUNSWixJQUFPLGdCQUNQSSxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEIsSUFBSVEsRUFBUVIsRUFBYSxLQUFTLE1BRTlCUyxFQUFhckIsRUFBS3NCLEtBQUtDLE1BQU0sS0FBS0MsT0FFbENDLEdBQU0sSUFBS0MsTUFBUUMsVUFBWSxJQUFNM0IsRUFBS3NCLEtBQUtDLE1BQU0sS0FBS0YsRUFBVyxHQUNyRU8sRUFBVyxDQUNYQyxNQUFPSixFQUNQSyxPQUFRLEdBQ1JDLFNBQVUsQ0FBQyxZQUFhLGFBQWMsWUFBYSxjQUVuREMsRUFBUyxDQUNUQyxlQUFlLEVBQ2ZDLFdBQVksRUFDWkMsT0FBUUMsTUFBTUQsT0FBT0UsSUFFUkQsTUFBTUUsT0FBT3RDLEVBQU15QixFQUFLTCxFQUFPUSxFQUFVSSxHQUMvQ08sVUFBVSxDQUNqQkMsS0FBUXZCLEVBQUt3Qix5QkFDYkMsTUFBU3pCLEVBQUswQixzQkFDZEMsU0FBWTNCLEVBQUs0QixrQ0FRekMxRCxLQUFLQyxVQUFVcUQseUJBQTJCLFNBQVVLLEdBQ2hELElBRUlDLEVBRlFELEVBQVNFLE1BQ0RDLFFBQ01DLFFBQVEsR0FBSyxJQUVuQi9ELEtBQUtnRSxjQUNYQyxPQUNkLElBQUlDLEVBQWN2RCxFQUFFLGlCQUNwQnVELEVBQVlDLElBQUksQ0FBQ0MsTUFBU1IsSUFDMUJNLEVBQVlHLEtBQUtULElBR3JCNUQsS0FBS0MsVUFBVXVELHNCQUF3QixTQUFVRCxHQUM3QzdCLFFBQVFDLElBQUk0QixHQUNRdkQsS0FBS2dFLGNBQ1hNLFFBR2xCdEUsS0FBS0MsVUFBVXlELHlCQUEyQixTQUFVQyxHQUNoRGpDLFFBQVFDLElBQUlnQyxHQUNRM0QsS0FBS2dFLGNBQ1hNLE9BR2QsSUFFSWxELEVBRlMsb0NBQ0V1QyxFQUFTckIsSUFFSDNCLEVBQUUsMkJBQ1JpQixJQUFJUixHQUduQixJQUFJOEMsRUFBY3ZELEVBQUUsaUJBQ3BCdUQsRUFBWUMsSUFBSSxDQUFDQyxNQUFTLE1BQzFCRixFQUFZRyxLQUFLLE9BR3JCckUsS0FBS0MsVUFBVXNFLGtCQUFvQixXQUNmNUQsRUFBRSxlQUNSNkQsTUFBTSxTQUFVQyxHQUN0QkEsRUFBTUMsaUJBQ04sSUFDSUMsRUFETWhFLEVBQUVvQixNQUNDNkMsS0FBSyxnQkFFZEMsRUFBUWxFLEVBQUUsdUJBQXVCaUIsTUFDakNrRCxFQUFXbkUsRUFBRSwyQkFBMkJpQixNQUN4Q21ELEVBQU9wRSxFQUFFLHNCQUFzQmlCLE1BQy9Cb0QsRUFBWXJFLEVBQUUsMkJBQTJCaUIsTUFDekNxRCxFQUFVOUUsT0FBT0MsR0FBRzhFLGFBRXBCOUQsRUFBTSxHQUVOQSxFQURBdUQsRUFDTSxrQkFFQSxtQkFHVnpELFFBQVFDLEtBQUssQ0FDVEMsSUFBT0EsRUFDUEMsS0FBUSxDQUNKd0QsTUFBU0EsRUFDVEMsU0FBWUEsRUFDWkMsS0FBUUEsRUFDUkMsVUFBYUEsRUFDYkMsUUFBV0EsRUFDWE4sR0FBTUEsR0FFVm5ELFFBQVcsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxNQUNiMEQsU0FBU0MsYUFDTCxPQUNBLFdBQ0lqRixPQUFPa0YsU0FBU0MsaUJBUzVDdEYsS0FBS0MsVUFBVXNGLElBQU0sV0FDakIsSUFBSXpELEVBQU9DLEtBQ1hELEVBQUs1QixjQUVMNEIsRUFBS0QsNkJBQ0xDLEVBQUt5QyxxQkFHVDVELEVBQUUsWUFDYSxJQUFJWCxNQUNWdUYsTUFFTHZGLEtBQUtnRSxjQUFnQnJELEVBQUUiLCJmaWxlIjoid3JpdGVfbmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZnVuY3Rpb24gTmV3cygpe1xyXG5cclxufVxyXG5cclxuTmV3cy5wcm90b3R5cGUuaW5pdFVFZGl0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoXCJlZGl0b3JcIiwge1xyXG4gICAgICAgIFwiaW5pdGlhbEZyYW1lSGVpZ2h0XCI6IDQwMCxcclxuICAgICAgICBcInNlcnZlclVybFwiOiBcIi91ZWRpdG9yL3VwbG9hZC9cIlxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5VcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJChcIiN0aHVtYm5haWwtYnRuXCIpO1xyXG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICBcInVybFwiOiBcIi9jbXMvdXBsb2FkX2ZpbGUvXCIsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgXCJwcm9jZXNzRGF0YVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgXCJjb250ZW50VHlwZVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRbXCJkYXRhXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0W1wiZGF0YVwiXVtcInVybFwiXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiI3RodW1ibmFpbC1mb3JtXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZFFpbml1RmlsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoXCIjdGh1bWJuYWlsLWJ0blwiKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IFwiL2Ntcy9xbnRva2VuL1wiLFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdFtcImRhdGFcIl1bXCJ0b2tlblwiXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTcGxpdCBmaWxlIG5hbWUgd2l0aCBcIi5cIiBhbmQgcmV0dXJuIGFycmF5IGxlbmd0aC5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZUxlbmd0aCA9IGZpbGUubmFtZS5zcGxpdChcIi5cIikubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgbGFzdCBlbGVtZW50IGFzIHN1ZmZpeC5cclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKSArIFwiLlwiICsgZmlsZS5uYW1lLnNwbGl0KFwiLlwiKVtmaWxlTGVuZ3RoLTFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwdXRFeHRyYSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm5hbWU6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IFtcImltYWdlL3BuZ1wiLCBcImltYWdlL2pwZWdcIiwgXCJpbWFnZS9naWZcIiwgXCJhdWRpby9tcDNcIl1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJDZG5Eb21haW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcWluaXUucmVnaW9uLnowXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSwgY29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmV4dFwiOiBzZWxmLmhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlcnJvclwiOiBzZWxmLmhhbmRsZUZpbGVVcGxvYWRFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wbGV0ZVwiOiBzZWxmLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XHJcbiAgICB2YXIgcGVyY2VudCA9IHRvdGFsLnBlcmNlbnQ7XHJcbiAgICB2YXIgcGVyY2VudFRleHQgPSBwZXJjZW50LnRvRml4ZWQoMCkgKyBcIiVcIjtcclxuICAgIC8vIGNvbnNvbGUubG9nKHBlcmNlbnQpO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBOZXdzLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9ncmVzc0dyb3VwLnNob3coKTtcclxuICAgIHZhciBwcm9ncmVzc0JhciA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIpO1xyXG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHtcIndpZHRoXCI6IHBlcmNlbnRUZXh0fSk7XHJcbiAgICBwcm9ncmVzc0Jhci50ZXh0KHBlcmNlbnRUZXh0KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBOZXdzLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBOZXdzLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcclxuXHJcbiAgICAvLyBTaG93IHVybCBpbiBpbnB1dCB0YWcuXHJcbiAgICB2YXIgZG9tYWluID0gXCJodHRwOi8vcG9yYmt2eW91LmJrdC5jbG91ZGRuLmNvbS9cIjtcclxuICAgIHZhciBmaWxlTmFtZSA9IHJlc3BvbnNlLmtleTtcclxuICAgIHZhciB1cmwgPSBkb21haW4gKyBmaWxlTmFtZTtcclxuICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKTtcclxuICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xyXG5cclxuICAgIC8vIFVwbG9hZCBkb25lLCByZXNldCBwcm9ncmVzcyBiYXIgdG8gMCUuXHJcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKFwiLnByb2dyZXNzLWJhclwiKTtcclxuICAgIHByb2dyZXNzQmFyLmNzcyh7XCJ3aWR0aFwiOiBcIjBcIn0pO1xyXG4gICAgcHJvZ3Jlc3NCYXIudGV4dChcIjAlXCIpO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gJChcIiNzdWJtaXQtYnRuXCIpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHBrID0gYnRuLmF0dHIoJ2RhdGEtbmV3cy1pZCcpO1xyXG5cclxuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xyXG5cclxuICAgICAgICB2YXIgdXJsID0gXCJcIjtcclxuICAgICAgICBpZiAocGspIHtcclxuICAgICAgICAgICAgdXJsID0gXCIvY21zL2VkaXRfbmV3cy9cIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgPSBcIi9jbXMvd3JpdGVfbmV3cy9cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IHVybCxcclxuICAgICAgICAgICAgXCJkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidGl0bGVcIjogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICBcImNhdGVnb3J5XCI6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgXCJkZXNjXCI6IGRlc2MsXHJcbiAgICAgICAgICAgICAgICBcInRodW1ibmFpbFwiOiB0aHVtYm5haWwsXHJcbiAgICAgICAgICAgICAgICBcImNvbnRlbnRcIjogY29udGVudCxcclxuICAgICAgICAgICAgICAgIFwicGtcIjogcGtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwi5Y+R5biD5oiQ5YqfXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5pbml0VUVkaXRvcigpO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5VcGxvYWRGaWxlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuVXBsb2FkUWluaXVGaWxlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpO1xyXG4gICAgbmV3cy5ydW4oKTtcclxuXHJcbiAgICBOZXdzLnByb2dyZXNzR3JvdXAgPSAkKFwiI3Byb2dyZXNzLWdyb3VwXCIpO1xyXG59KTsiXX0=
