function News(){}News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var e=n[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){console.log(e.data);var t=e.data.url;$("#thumbnail-form").val(t)}}})})},News.prototype.listenUploadQiniuFileEvent=function(){var s=this;$("#thumbnail-btn").change(function(){var r=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var t=e.data.token,n=r.name.split(".").length,o=(new Date).getTime()+"."+r.name.split(".")[n-1],i={fname:o,params:{},mimeType:["image/png","image/jpeg","image/gif","audio/mp3"]},a={userCdnDomain:!0,retryCount:6,region:qiniu.region.z0};qiniu.upload(r,o,t,i,a).subscribe({next:s.handleFileUploadProgress,error:s.handleFileUploadError,complete:s.handleFileUploadComplete})}}})})},News.prototype.handleFileUploadProgress=function(e){var t=e.total.percent.toFixed(0)+"%";News.progressGroup.show();var n=$(".progress-bar");n.css({width:t}),n.text(t)},News.prototype.handleFileUploadError=function(e){console.log(e),News.progressGroup.hide()},News.prototype.handleFileUploadComplete=function(e){console.log(e),News.progressGroup.hide();var t="http://porbkvyou.bkt.clouddn.com"+e.key;$("input[name='thumbnail']").val(t);var n=$(".progress-bar");n.css({width:"0"}),n.text("0%")},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(e){e.preventDefault();var t=$(this).attr("data-news-id"),n=$("input[name='title']").val(),o=$("select[name='category']").val(),i=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),r=window.ue.getContent();xfzajax.post({url:"/cms/write_news/",data:{title:n,category:o,desc:i,thumbnail:a,content:r,pk:t},success:function(e){200===e.code&&xfzalert.alertSuccess("发布成功",function(){window.location.reload()})}})})},News.prototype.run=function(){var e=this;e.initUEditor(),e.listenUploadQiniuFileEvent(),e.listenSubmitEvent()},$(function(){(new News).run(),News.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwidmFsIiwibGlzdGVuVXBsb2FkUWluaXVGaWxlRXZlbnQiLCJzZWxmIiwidGhpcyIsImdldCIsInRva2VuIiwiZmlsZUxlbmd0aCIsIm5hbWUiLCJzcGxpdCIsImxlbmd0aCIsImtleSIsIkRhdGUiLCJnZXRUaW1lIiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtcyIsIm1pbWVUeXBlIiwiY29uZmlnIiwidXNlckNkbkRvbWFpbiIsInJldHJ5Q291bnQiLCJyZWdpb24iLCJxaW5pdSIsInowIiwidXBsb2FkIiwic3Vic2NyaWJlIiwibmV4dCIsImhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyIsImVycm9yIiwiaGFuZGxlRmlsZVVwbG9hZEVycm9yIiwiY29tcGxldGUiLCJoYW5kbGVGaWxlVXBsb2FkQ29tcGxldGUiLCJyZXNwb25zZSIsInBlcmNlbnRUZXh0IiwidG90YWwiLCJwZXJjZW50IiwidG9GaXhlZCIsInByb2dyZXNzR3JvdXAiLCJzaG93IiwicHJvZ3Jlc3NCYXIiLCJjc3MiLCJ3aWR0aCIsInRleHQiLCJoaWRlIiwibGlzdGVuU3VibWl0RXZlbnQiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJwayIsImF0dHIiLCJ0aXRsZSIsImNhdGVnb3J5IiwiZGVzYyIsInRodW1ibmFpbCIsImNvbnRlbnQiLCJnZXRDb250ZW50IiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJsb2NhdGlvbiIsInJlbG9hZCIsInJ1biJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsUUFJVEEsS0FBS0MsVUFBVUMsWUFBYyxXQUN6QkMsT0FBT0MsR0FBS0MsR0FBR0MsVUFBVSxTQUFVLENBQy9CQyxtQkFBc0IsSUFDdEJDLFVBQWEsc0JBSXJCUixLQUFLQyxVQUFVUSxzQkFBd0IsV0FDbkMsSUFDSUMsRUFBWUMsRUFBRSxrQkFDbEJELEVBQVVFLE9BQU8sV0FDYixJQUFJQyxFQUFPSCxFQUFVLEdBQUdJLE1BQU0sR0FDMUJDLEVBQVcsSUFBSUMsU0FDbkJELEVBQVNFLE9BQU8sT0FBUUosR0FDeEJLLFFBQVFDLEtBQUssQ0FDVEMsSUFBTyxvQkFDUEMsS0FBUU4sRUFDUk8sYUFBZSxFQUNmQyxhQUFlLEVBQ2ZDLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QkMsUUFBUUMsSUFBSUYsRUFBYSxNQUN6QixJQUFJTCxFQUFNSyxFQUFhLEtBQU8sSUFDVGQsRUFBRSxtQkFDUmlCLElBQUlSLFVBT3ZDcEIsS0FBS0MsVUFBVTRCLDJCQUE2QixXQUN4QyxJQUFJQyxFQUFPQyxLQUNLcEIsRUFBRSxrQkFDUkMsT0FBTyxXQUNiLElBQUlDLEVBQU9rQixLQUFLakIsTUFBTSxHQUN0QkksUUFBUWMsSUFBSSxDQUNSWixJQUFPLGdCQUNQSSxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEIsSUFBSVEsRUFBUVIsRUFBYSxLQUFTLE1BRTlCUyxFQUFhckIsRUFBS3NCLEtBQUtDLE1BQU0sS0FBS0MsT0FFbENDLEdBQU0sSUFBS0MsTUFBUUMsVUFBWSxJQUFNM0IsRUFBS3NCLEtBQUtDLE1BQU0sS0FBS0YsRUFBVyxHQUNyRU8sRUFBVyxDQUNYQyxNQUFPSixFQUNQSyxPQUFRLEdBQ1JDLFNBQVUsQ0FBQyxZQUFhLGFBQWMsWUFBYSxjQUVuREMsRUFBUyxDQUNUQyxlQUFlLEVBQ2ZDLFdBQVksRUFDWkMsT0FBUUMsTUFBTUQsT0FBT0UsSUFFUkQsTUFBTUUsT0FBT3RDLEVBQU15QixFQUFLTCxFQUFPUSxFQUFVSSxHQUMvQ08sVUFBVSxDQUNqQkMsS0FBUXZCLEVBQUt3Qix5QkFDYkMsTUFBU3pCLEVBQUswQixzQkFDZEMsU0FBWTNCLEVBQUs0QixrQ0FRekMxRCxLQUFLQyxVQUFVcUQseUJBQTJCLFNBQVVLLEdBQ2hELElBRUlDLEVBRlFELEVBQVNFLE1BQ0RDLFFBQ01DLFFBQVEsR0FBSyxJQUVuQi9ELEtBQUtnRSxjQUNYQyxPQUNkLElBQUlDLEVBQWN2RCxFQUFFLGlCQUNwQnVELEVBQVlDLElBQUksQ0FBQ0MsTUFBU1IsSUFDMUJNLEVBQVlHLEtBQUtULElBR3JCNUQsS0FBS0MsVUFBVXVELHNCQUF3QixTQUFVRCxHQUM3QzdCLFFBQVFDLElBQUk0QixHQUNRdkQsS0FBS2dFLGNBQ1hNLFFBR2xCdEUsS0FBS0MsVUFBVXlELHlCQUEyQixTQUFVQyxHQUNoRGpDLFFBQVFDLElBQUlnQyxHQUNRM0QsS0FBS2dFLGNBQ1hNLE9BR2QsSUFFSWxELEVBRlMsbUNBQ0V1QyxFQUFTckIsSUFFSDNCLEVBQUUsMkJBQ1JpQixJQUFJUixHQUduQixJQUFJOEMsRUFBY3ZELEVBQUUsaUJBQ3BCdUQsRUFBWUMsSUFBSSxDQUFDQyxNQUFTLE1BQzFCRixFQUFZRyxLQUFLLE9BR3JCckUsS0FBS0MsVUFBVXNFLGtCQUFvQixXQUNmNUQsRUFBRSxlQUNSNkQsTUFBTSxTQUFVQyxHQUN0QkEsRUFBTUMsaUJBQ04sSUFDSUMsRUFETWhFLEVBQUVvQixNQUNDNkMsS0FBSyxnQkFFZEMsRUFBUWxFLEVBQUUsdUJBQXVCaUIsTUFDakNrRCxFQUFXbkUsRUFBRSwyQkFBMkJpQixNQUN4Q21ELEVBQU9wRSxFQUFFLHNCQUFzQmlCLE1BQy9Cb0QsRUFBWXJFLEVBQUUsMkJBQTJCaUIsTUFDekNxRCxFQUFVOUUsT0FBT0MsR0FBRzhFLGFBRXhCaEUsUUFBUUMsS0FBSyxDQUNUQyxJQUFPLG1CQUNQQyxLQUFRLENBQ0p3RCxNQUFTQSxFQUNUQyxTQUFZQSxFQUNaQyxLQUFRQSxFQUNSQyxVQUFhQSxFQUNiQyxRQUFXQSxFQUNYTixHQUFNQSxHQUVWbkQsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE1BQ2IwRCxTQUFTQyxhQUNMLE9BQ0EsV0FDSWpGLE9BQU9rRixTQUFTQyxpQkFTNUN0RixLQUFLQyxVQUFVc0YsSUFBTSxXQUNqQixJQUFJekQsRUFBT0MsS0FDWEQsRUFBSzVCLGNBRUw0QixFQUFLRCw2QkFDTEMsRUFBS3lDLHFCQUdUNUQsRUFBRSxZQUNhLElBQUlYLE1BQ1Z1RixNQUVMdkYsS0FBS2dFLGNBQWdCckQsRUFBRSIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5mdW5jdGlvbiBOZXdzKCl7XHJcblxyXG59XHJcblxyXG5OZXdzLnByb3RvdHlwZS5pbml0VUVkaXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcihcImVkaXRvclwiLCB7XHJcbiAgICAgICAgXCJpbml0aWFsRnJhbWVIZWlnaHRcIjogNDAwLFxyXG4gICAgICAgIFwic2VydmVyVXJsXCI6IFwiL3VlZGl0b3IvdXBsb2FkL1wiXHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB1cGxvYWRCdG4gPSAkKFwiI3RodW1ibmFpbC1idG5cIik7XHJcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsIGZpbGUpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IFwiL2Ntcy91cGxvYWRfZmlsZS9cIixcclxuICAgICAgICAgICAgXCJkYXRhXCI6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICBcInByb2Nlc3NEYXRhXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICBcImNvbnRlbnRUeXBlXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdFtcImRhdGFcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbXCJkYXRhXCJdW1widXJsXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoXCIjdGh1bWJuYWlsLWZvcm1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsSW5wdXQudmFsKHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuVXBsb2FkUWluaXVGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJChcIiN0aHVtYm5haWwtYnRuXCIpO1xyXG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgXCJ1cmxcIjogXCIvY21zL3FudG9rZW4vXCIsXHJcbiAgICAgICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0W1wiY29kZVwiXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0W1wiZGF0YVwiXVtcInRva2VuXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNwbGl0IGZpbGUgbmFtZSB3aXRoIFwiLlwiIGFuZCByZXR1cm4gYXJyYXkgbGVuZ3RoLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTGVuZ3RoID0gZmlsZS5uYW1lLnNwbGl0KFwiLlwiKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBsYXN0IGVsZW1lbnQgYXMgc3VmZml4LlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgXCIuXCIgKyBmaWxlLm5hbWUuc3BsaXQoXCIuXCIpW2ZpbGVMZW5ndGgtMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEV4dHJhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogW1wiaW1hZ2UvcG5nXCIsIFwiaW1hZ2UvanBlZ1wiLCBcImltYWdlL2dpZlwiLCBcImF1ZGlvL21wM1wiXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckNkbkRvbWFpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudDogNixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBxaW5pdS5yZWdpb24uejBcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gcWluaXUudXBsb2FkKGZpbGUsIGtleSwgdG9rZW4sIHB1dEV4dHJhLCBjb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJuZXh0XCI6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVycm9yXCI6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZEVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbXBsZXRlXCI6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDtcclxuICAgIHZhciBwZXJjZW50ID0gdG90YWwucGVyY2VudDtcclxuICAgIHZhciBwZXJjZW50VGV4dCA9IHBlcmNlbnQudG9GaXhlZCgwKSArIFwiJVwiO1xyXG4gICAgLy8gY29uc29sZS5sb2cocGVyY2VudCk7XHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IE5ld3MucHJvZ3Jlc3NHcm91cDtcclxuICAgIHByb2dyZXNzR3JvdXAuc2hvdygpO1xyXG4gICAgdmFyIHByb2dyZXNzQmFyID0gJChcIi5wcm9ncmVzcy1iYXJcIik7XHJcbiAgICBwcm9ncmVzc0Jhci5jc3Moe1wid2lkdGhcIjogcGVyY2VudFRleHR9KTtcclxuICAgIHByb2dyZXNzQmFyLnRleHQocGVyY2VudFRleHQpO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IE5ld3MucHJvZ3Jlc3NHcm91cDtcclxuICAgIHByb2dyZXNzR3JvdXAuaGlkZSgpO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IE5ld3MucHJvZ3Jlc3NHcm91cDtcclxuICAgIHByb2dyZXNzR3JvdXAuaGlkZSgpO1xyXG5cclxuICAgIC8vIFNob3cgdXJsIGluIGlucHV0IHRhZy5cclxuICAgIHZhciBkb21haW4gPSBcImh0dHA6Ly9wb3Jia3Z5b3UuYmt0LmNsb3VkZG4uY29tXCI7XHJcbiAgICB2YXIgZmlsZU5hbWUgPSByZXNwb25zZS5rZXk7XHJcbiAgICB2YXIgdXJsID0gZG9tYWluICsgZmlsZU5hbWU7XHJcbiAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIik7XHJcbiAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcclxuXHJcbiAgICAvLyBVcGxvYWQgZG9uZSwgcmVzZXQgcHJvZ3Jlc3MgYmFyIHRvIDAlLlxyXG4gICAgdmFyIHByb2dyZXNzQmFyID0gJChcIi5wcm9ncmVzcy1iYXJcIik7XHJcbiAgICBwcm9ncmVzc0Jhci5jc3Moe1wid2lkdGhcIjogXCIwXCJ9KTtcclxuICAgIHByb2dyZXNzQmFyLnRleHQoXCIwJVwiKTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoXCIjc3VibWl0LWJ0blwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBwayA9IGJ0bi5hdHRyKCdkYXRhLW5ld3MtaWQnKTtcclxuXHJcbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBkZXNjID0gJChcImlucHV0W25hbWU9J2Rlc2MnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgXCJ1cmxcIjogXCIvY21zL3dyaXRlX25ld3MvXCIsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInRpdGxlXCI6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgXCJjYXRlZ29yeVwiOiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIFwiZGVzY1wiOiBkZXNjLFxyXG4gICAgICAgICAgICAgICAgXCJ0aHVtYm5haWxcIjogdGh1bWJuYWlsLFxyXG4gICAgICAgICAgICAgICAgXCJjb250ZW50XCI6IGNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBcInBrXCI6IHBrXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0W1wiY29kZVwiXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIuWPkeW4g+aIkOWKn1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuaW5pdFVFZGl0b3IoKTtcclxuICAgIC8vIHNlbGYubGlzdGVuVXBsb2FkRmlsZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblVwbG9hZFFpbml1RmlsZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcclxuICAgIG5ld3MucnVuKCk7XHJcblxyXG4gICAgTmV3cy5wcm9ncmVzc0dyb3VwID0gJChcIiNwcm9ncmVzcy1ncm91cFwiKTtcclxufSk7Il19
